{
  "title": "AZ-104 Storage Management Advanced Questions",
  "description": "Advanced questions covering Azure Storage accounts, blob storage, files, security, and data management - 15-20% of exam",
  "questions": [
    {
      "question": "You have a storage account with Hot, Cool, and Archive tiers configured. You need to automatically move blobs to Cool tier after 30 days of no access and to Archive tier after 90 days. What should you configure?",
      "correct_answer": "Blob lifecycle management policy with tier transition rules",
      "wrong_answers": [
        "Azure Automation runbook with blob tier change scripts",
        "Azure Logic App with blob monitoring triggers",
        "Azure Data Factory pipeline with copy activities",
        "Storage account access tier configuration"
      ],
      "explanation": "Blob lifecycle management policies automatically transition blobs between access tiers based on rules you define, including last accessed time or creation time criteria.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/blobs/lifecycle-management-overview",
        "https://learn.microsoft.com/en-us/azure/storage/blobs/lifecycle-management-policy-configure"
      ],
      "category": "Storage"
    },
    {
      "question": "You need to provide temporary access to a blob container for an external partner. The access should expire in 2 hours and only allow read operations. What is the most secure approach?",
      "correct_answer": "Generate a Service SAS token with read permissions and 2-hour expiry",
      "wrong_answers": [
        "Share the storage account access key with the partner",
        "Create a stored access policy with 2-hour duration",
        "Use Azure AD authentication with guest user account",
        "Configure anonymous public read access on the container"
      ],
      "explanation": "A Service SAS (Shared Access Signature) token provides time-limited, permission-specific access to storage resources without sharing account keys or requiring Azure AD accounts.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview",
        "https://learn.microsoft.com/en-us/azure/storage/blobs/sas-service-create"
      ],
      "category": "Storage"
    },
    {
      "question": "Your company requires that all data in Azure Storage must be encrypted with customer-managed keys stored in Azure Key Vault. What should you configure on the storage account?",
      "correct_answer": "Customer-managed keys (CMK) with Azure Key Vault integration",
      "wrong_answers": [
        "Service-managed keys with increased key rotation",
        "Client-side encryption with Azure Key Vault",
        "Storage Service Encryption with Microsoft-managed keys",
        "Azure Disk Encryption for storage accounts"
      ],
      "explanation": "Customer-managed keys (CMK) allow you to use your own encryption keys stored in Azure Key Vault to encrypt storage account data, giving you full control over key management.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/common/customer-managed-keys-overview",
        "https://learn.microsoft.com/en-us/azure/storage/common/customer-managed-keys-configure-key-vault"
      ],
      "category": "Storage"
    },
    {
      "question": "You have a storage account that contains critical business data. You need to ensure that accidentally deleted blobs can be recovered for up to 30 days. What should you enable?",
      "correct_answer": "Soft delete for blobs with 30-day retention period",
      "wrong_answers": [
        "Blob versioning with 30-day retention",
        "Point-in-time restore for the storage account",
        "Change feed with 30-day retention",
        "Blob snapshots with automated scheduling"
      ],
      "explanation": "Soft delete for blobs protects individual blobs and their versions from accidental deletion or modification by maintaining deleted data for a specified retention period.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/blobs/soft-delete-blob-overview",
        "https://learn.microsoft.com/en-us/azure/storage/blobs/soft-delete-blob-enable"
      ],
      "category": "Storage"
    },
    {
      "question": "You need to replicate data from a storage account in East US to West US for disaster recovery. The replicated data should be readable from the secondary region. Which replication option should you choose?",
      "correct_answer": "Read-access geo-redundant storage (RA-GRS)",
      "wrong_answers": [
        "Geo-redundant storage (GRS)",
        "Zone-redundant storage (ZRS)",
        "Locally redundant storage (LRS)",
        "Geo-zone-redundant storage (GZRS)"
      ],
      "explanation": "RA-GRS provides geo-replication to a secondary region with read access to the replicated data, enabling disaster recovery scenarios with read capabilities from the secondary region.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-redundancy#read-access-geo-redundant-storage",
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance"
      ],
      "category": "Storage"
    },
    {
      "question": "You need to configure Azure Files to use Active Directory authentication for on-premises domain-joined clients. What must you configure first?",
      "correct_answer": "Azure AD Domain Services or AD DS authentication for the storage account",
      "wrong_answers": [
        "Azure AD Connect synchronization",
        "Storage account access keys rotation",
        "File share permissions and ACLs",
        "Network security group rules for SMB traffic"
      ],
      "explanation": "To use Active Directory authentication with Azure Files, you must first enable either Azure AD Domain Services or on-premises AD DS authentication at the storage account level.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/files/storage-files-identity-auth-active-directory-enable",
        "https://learn.microsoft.com/en-us/azure/storage/files/storage-files-identity-ad-ds-enable"
      ],
      "category": "Storage"
    },
    {
      "question": "You have a blob container with thousands of files. You need to copy all files with a specific prefix to another storage account in a different region. What tool provides the best performance for this operation?",
      "correct_answer": "AzCopy with prefix filtering",
      "wrong_answers": [
        "Azure Storage Explorer with batch operations",
        "Azure Data Factory copy activity",
        "PowerShell with Azure Storage modules",
        "Azure Portal bulk download and upload"
      ],
      "explanation": "AzCopy is optimized for high-performance blob transfers and supports pattern matching with prefixes, making it ideal for large-scale copy operations between storage accounts.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-v10",
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-blobs-copy"
      ],
      "category": "Storage"
    },
    {
      "question": "You need to configure object replication between two storage accounts in different regions. The replication should only include blobs with a specific tag. What should you configure?",
      "correct_answer": "Object replication policy with prefix and tag filters",
      "wrong_answers": [
        "Cross-region replication with lifecycle policies",
        "Change feed with filtered blob notifications",
        "Azure Data Factory with conditional copy activities",
        "Blob event triggers with tag-based filtering"
      ],
      "explanation": "Object replication policies support filters based on blob prefixes and tags, allowing you to replicate only specific blobs that match your criteria to the destination account.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/blobs/object-replication-overview",
        "https://learn.microsoft.com/en-us/azure/storage/blobs/object-replication-configure"
      ],
      "category": "Storage"
    },
    {
      "question": "Your application needs to access Azure Blob Storage using Azure AD authentication. The application runs on an Azure VM with a system-assigned managed identity. How should you configure access?",
      "correct_answer": "Assign Storage Blob Data Reader/Contributor role to the VM's managed identity",
      "wrong_answers": [
        "Configure the storage account to use the VM's access keys",
        "Create a service principal and assign it to the storage account",
        "Use connection strings with managed identity tokens",
        "Enable anonymous access on the blob container"
      ],
      "explanation": "Managed identities can be assigned Azure RBAC roles like Storage Blob Data Reader or Contributor to access blob storage using Azure AD authentication without managing credentials.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/blobs/assign-azure-role-data-access",
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-auth-aad-msi"
      ],
      "category": "Storage"
    },
    {
      "question": "You need to configure a storage account firewall to allow access only from specific virtual networks and IP ranges while blocking all other internet traffic. What should you configure?",
      "correct_answer": "Storage account networking settings with selected networks and service endpoints",
      "wrong_answers": [
        "Network security groups on storage account subnets",
        "Azure Firewall rules for storage traffic",
        "Private endpoints for all storage services",
        "Azure Front Door with storage backend"
      ],
      "explanation": "Storage account firewall settings allow you to restrict access to selected networks, specific IP ranges, and virtual networks with service endpoints configured.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security",
        "https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security-configure"
      ],
      "category": "Storage"
    },
    {
      "question": "You have enabled blob versioning on a storage account. You notice that storage costs are increasing due to multiple versions of blobs. What can you do to manage costs while retaining some version history?",
      "correct_answer": "Configure lifecycle management to delete old versions after a specified period",
      "wrong_answers": [
        "Disable blob versioning entirely",
        "Move old versions to Archive tier manually",
        "Use soft delete instead of versioning",
        "Enable data deduplication on the storage account"
      ],
      "explanation": "Lifecycle management policies can automatically delete blob versions older than a specified number of days, helping control storage costs while maintaining recent version history.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/blobs/lifecycle-management-overview",
        "https://learn.microsoft.com/en-us/azure/storage/blobs/versioning-overview"
      ],
      "category": "Storage"
    },
    {
      "question": "You need to monitor access to a critical blob container and receive alerts when unauthorized access attempts occur. What should you configure?",
      "correct_answer": "Azure Monitor with storage account diagnostic settings and alert rules",
      "wrong_answers": [
        "Azure Security Center with storage protection",
        "Azure Sentinel with storage connector",
        "Storage account access logs only",
        "Azure Application Insights for storage"
      ],
      "explanation": "Azure Monitor can collect storage account logs through diagnostic settings and create alert rules based on failed authentication attempts or unusual access patterns.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/blobs/monitor-blob-storage",
        "https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/resource-logs"
      ],
      "category": "Storage"
    },
    {
      "question": "You have a storage account with large files that are frequently accessed by users worldwide. You want to improve access performance and reduce bandwidth costs. What should you implement?",
      "correct_answer": "Azure CDN with blob storage origin",
      "wrong_answers": [
        "Read-access geo-redundant storage (RA-GRS)",
        "Premium performance tier storage account",
        "Multiple storage accounts in different regions",
        "Azure Front Door with load balancing"
      ],
      "explanation": "Azure CDN caches blob content at edge locations worldwide, reducing latency for global users and bandwidth costs by serving content from the nearest edge location.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/cdn/cdn-create-a-storage-account-with-cdn",
        "https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website-cdn"
      ],
      "category": "Storage"
    },
    {
      "question": "You need to provide secure access to Azure Files for on-premises clients without exposing the storage account to the public internet. What should you configure?",
      "correct_answer": "Private endpoint for the storage account file service",
      "wrong_answers": [
        "Site-to-site VPN with service endpoints",
        "Azure Bastion for secure file access",
        "ExpressRoute with public peering",
        "Point-to-site VPN for each client"
      ],
      "explanation": "Private endpoints provide private IP addresses for storage services within your virtual network, enabling secure access from on-premises through VPN or ExpressRoute without internet exposure.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/files/storage-files-networking-endpoints",
        "https://learn.microsoft.com/en-us/azure/private-link/private-endpoint-overview"
      ],
      "category": "Storage"
    },
    {
      "question": "You have a storage account that stores backup files. The files must be retained for 7 years for compliance but are rarely accessed after 90 days. What is the most cost-effective storage strategy?",
      "correct_answer": "Use lifecycle management to move files to Archive tier after 90 days",
      "wrong_answers": [
        "Keep all files in Cool tier for the entire retention period",
        "Move files to a separate Archive storage account after 90 days",
        "Use Azure Backup instead of blob storage",
        "Configure geo-redundant storage for long-term retention"
      ],
      "explanation": "Archive tier provides the lowest storage costs for long-term retention scenarios where data is rarely accessed, making it ideal for compliance scenarios with long retention requirements.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/storage/blobs/access-tiers-overview",
        "https://learn.microsoft.com/en-us/azure/storage/blobs/lifecycle-management-overview"
      ],
      "category": "Storage"
    }
  ]
}
