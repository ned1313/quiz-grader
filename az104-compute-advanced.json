{
  "title": "AZ-104 Compute Resources Advanced Questions",
  "description": "Advanced questions covering virtual machines, ARM/Bicep templates, containers, and App Service - 20-25% of exam",
  "questions": [
    {
      "question": "You need to deploy a VM that requires exactly 4 vCPUs and 16 GB of RAM with consistent performance. The VM will run compute-intensive workloads. Which VM series should you choose?",
      "correct_answer": "Fsv2-series",
      "wrong_answers": [
        "Bs-series (Burstable)",
        "Av2-series (General purpose)",
        "Ev3-series (Memory optimized)",
        "Lsv2-series (Storage optimized)"
      ],
      "explanation": "Fsv2-series VMs are compute-optimized with high CPU-to-memory ratio and consistent performance, making them ideal for compute-intensive workloads requiring specific CPU and memory configurations.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/virtual-machines/fsv2-series",
        "https://learn.microsoft.com/en-us/azure/virtual-machines/sizes-compute"
      ],
      "category": "Compute"
    },
    {
      "question": "You have an ARM template that deploys a virtual machine with dependencies on a storage account and virtual network. You want to ensure the resources are deployed in the correct order. What should you use in the template?",
      "correct_answer": "dependsOn property to specify resource dependencies",
      "wrong_answers": [
        "condition property to control deployment order",
        "copy element to deploy resources sequentially",
        "reference() function to establish relationships",
        "variables to control deployment sequence"
      ],
      "explanation": "The dependsOn property explicitly defines dependencies between resources, ensuring that prerequisite resources like storage accounts and virtual networks are deployed before dependent resources like VMs.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/resource-dependency",
        "https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/template-syntax"
      ],
      "category": "Compute"
    },
    {
      "question": "You need to configure Azure Disk Encryption for a Windows VM. The encryption keys must be stored in Azure Key Vault in the same region as the VM. What are the minimum requirements?",
      "correct_answer": "Key Vault with access policies for Azure Disk Encryption and VM system-assigned managed identity",
      "wrong_answers": [
        "Premium Key Vault with RBAC permissions only",
        "Key Vault with soft delete disabled for encryption keys",
        "Standard Key Vault with firewall restrictions enabled",
        "Key Vault with customer-managed keys for storage encryption"
      ],
      "explanation": "Azure Disk Encryption requires a Key Vault with proper access policies that allow the Azure Disk Encryption service to access keys, and the VM needs permissions through managed identity or service principal.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/virtual-machines/disk-encryption-overview",
        "https://learn.microsoft.com/en-us/azure/virtual-machines/disk-encryption-key-vault"
      ],
      "category": "Compute"
    },
    {
      "question": "You have a VM Scale Set with 10 instances. You need to update the application on all instances with zero downtime. The update should be applied gradually. What should you configure?",
      "correct_answer": "Rolling upgrade policy with batch size and pause duration",
      "wrong_answers": [
        "Automatic upgrade policy with immediate deployment",
        "Manual upgrade policy with simultaneous updates",
        "Blue-green deployment strategy",
        "Application Gateway health probes only"
      ],
      "explanation": "Rolling upgrade policy allows you to update VMSS instances gradually in batches, ensuring application availability by updating only a portion of instances at a time with configurable pause between batches.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-upgrade-scale-set",
        "https://learn.microsoft.com/en-us/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-upgrade-policy"
      ],
      "category": "Compute"
    },
    {
      "question": "You need to move a VM from one Azure region to another while preserving the VM configuration and data. The VM has managed disks and is part of an availability set. What is the recommended approach?",
      "correct_answer": "Use Azure Site Recovery to replicate and fail over the VM to the target region",
      "wrong_answers": [
        "Export VM as ARM template and redeploy in target region",
        "Create disk snapshots and restore them in target region",
        "Use Azure Migrate to move the VM directly",
        "Stop VM, copy VHD files, and recreate in target region"
      ],
      "explanation": "Azure Site Recovery provides comprehensive VM replication across regions, preserving all VM configurations, data, and dependencies while enabling controlled failover to the target region.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/site-recovery/azure-to-azure-tutorial-migrate",
        "https://learn.microsoft.com/en-us/azure/virtual-machines/move-region-maintenance-configuration"
      ],
      "category": "Compute"
    },
    {
      "question": "You are deploying a container application using Azure Container Instances. The application requires persistent storage that survives container restarts. What should you configure?",
      "correct_answer": "Azure Files volume mount",
      "wrong_answers": [
        "Container group shared storage",
        "Azure Blob Storage with REST API access",
        "Local SSD storage in the container",
        "Azure Disk attachment to container"
      ],
      "explanation": "Azure Files provides persistent, shared storage that can be mounted to Azure Container Instances, ensuring data persists across container restarts and can be shared between containers.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/container-instances/container-instances-volume-azure-files",
        "https://learn.microsoft.com/en-us/azure/container-instances/container-instances-volumes"
      ],
      "category": "Compute"
    },
    {
      "question": "You have an App Service that needs to connect to an on-premises database. The connection must be secure and not traverse the public internet. What should you configure?",
      "correct_answer": "VNet Integration with the App Service and VPN/ExpressRoute connectivity",
      "wrong_answers": [
        "Hybrid Connections with Service Bus Relay",
        "Private endpoints for the App Service",
        "Application Gateway with backend on-premises servers",
        "Azure Bastion for secure database connections"
      ],
      "explanation": "VNet Integration allows App Service to securely connect to resources in a virtual network, which can then connect to on-premises resources via VPN or ExpressRoute without using public internet.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/app-service/overview-vnet-integration",
        "https://learn.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet"
      ],
      "category": "Compute"
    },
    {
      "question": "You need to automatically scale an App Service based on CPU utilization and memory usage. Scale out should occur when either metric exceeds 70%. What should you configure?",
      "correct_answer": "Autoscale rules with OR logic for multiple metrics",
      "wrong_answers": [
        "Separate autoscale rules for each metric",
        "Custom metrics with combined CPU and memory values",
        "Application Insights alerts triggering manual scaling",
        "Azure Monitor action groups for scaling operations"
      ],
      "explanation": "Autoscale can be configured with multiple rules using OR logic, meaning scaling will trigger when any of the specified conditions (CPU > 70% OR Memory > 70%) are met.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/azure-monitor/autoscale/autoscale-get-started",
        "https://learn.microsoft.com/en-us/azure/app-service/manage-automatic-scaling"
      ],
      "category": "Compute"
    },
    {
      "question": "You are converting an ARM template to Bicep. The ARM template uses nested templates with linked deployments. How should you handle this in Bicep?",
      "correct_answer": "Use Bicep modules with module references",
      "wrong_answers": [
        "Convert nested templates to Bicep variables",
        "Use Bicep functions to inline nested templates",
        "Create separate Bicep files with manual deployment",
        "Use ARM template references within Bicep"
      ],
      "explanation": "Bicep modules are the equivalent of ARM nested/linked templates, providing reusable, modular infrastructure code that can be referenced and parameterized from main Bicep files.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/modules",
        "https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/bicep-tutorial-use-modules"
      ],
      "category": "Compute"
    },
    {
      "question": "You have a VM that requires a specific network configuration with multiple IP addresses. You need to add a secondary IP configuration that can be assigned to a different subnet. What should you do?",
      "correct_answer": "Add an additional network interface (NIC) attached to the different subnet",
      "wrong_answers": [
        "Add a secondary IP configuration to the existing NIC",
        "Configure multiple subnets on the same NIC",
        "Use Azure Load Balancer for IP distribution",
        "Create a virtual network gateway for routing"
      ],
      "explanation": "To assign IP addresses from different subnets to a VM, you need separate network interfaces for each subnet, as each NIC can only be connected to one subnet at a time.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-multiple-ip-addresses-portal",
        "https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-multiple-nics"
      ],
      "category": "Compute"
    },
    {
      "question": "You need to deploy a containerized application that requires scaling to zero when not in use to minimize costs. The application receives HTTP requests and processes them asynchronously. Which Azure service should you use?",
      "correct_answer": "Azure Container Apps",
      "wrong_answers": [
        "Azure Container Instances",
        "Azure Kubernetes Service (AKS)",
        "Azure App Service containers",
        "Azure Batch with container pools"
      ],
      "explanation": "Azure Container Apps supports scaling to zero replicas when there's no traffic, automatically scaling up when requests arrive, making it cost-effective for intermittent workloads.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/container-apps/scale-app",
        "https://learn.microsoft.com/en-us/azure/container-apps/overview"
      ],
      "category": "Compute"
    },
    {
      "question": "You have an App Service with deployment slots for staging and production. You need to ensure that configuration settings specific to each environment are maintained during slot swaps. What should you configure?",
      "correct_answer": "Deployment slot settings (sticky settings) for environment-specific configurations",
      "wrong_answers": [
        "Application settings without slot-specific configuration",
        "Azure Key Vault references for all configuration",
        "Environment variables in the application code",
        "Azure App Configuration with feature flags"
      ],
      "explanation": "Deployment slot settings (sticky settings) remain with their respective slots during swaps, ensuring environment-specific configurations like connection strings and app settings stay with the correct environment.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/app-service/deploy-staging-slots",
        "https://learn.microsoft.com/en-us/azure/app-service/deploy-staging-slots#configure-deployment-settings"
      ],
      "category": "Compute"
    },
    {
      "question": "You need to deploy a VM that can handle unpredictable CPU bursts but runs at low baseline utilization most of the time. Cost optimization is important. Which VM series should you choose?",
      "correct_answer": "B-series (Burstable)",
      "wrong_answers": [
        "F-series (Compute optimized)",
        "D-series (General purpose)",
        "E-series (Memory optimized)",
        "M-series (Memory optimized high-performance)"
      ],
      "explanation": "B-series VMs accumulate CPU credits during low utilization periods and can burst above baseline performance when needed, offering cost-effective performance for variable workloads.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/virtual-machines/b-series-burstable",
        "https://learn.microsoft.com/en-us/azure/virtual-machines/sizes-b-series-burstable"
      ],
      "category": "Compute"
    },
    {
      "question": "You are using Azure Container Registry (ACR) to store container images. You need to automatically scan images for vulnerabilities when they are pushed to the registry. What should you enable?",
      "correct_answer": "Microsoft Defender for container registries",
      "wrong_answers": [
        "Azure Security Center standard tier",
        "ACR Content Trust and image signing",
        "ACR geo-replication for security",
        "Azure Policy for container compliance"
      ],
      "explanation": "Microsoft Defender for container registries automatically scans container images for known vulnerabilities when they are pushed to ACR, providing security insights and recommendations.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/defender-for-cloud/defender-for-containers-introduction",
        "https://learn.microsoft.com/en-us/azure/container-registry/container-registry-azure-policy"
      ],
      "category": "Compute"
    },
    {
      "question": "You have a Bicep file that needs to conditionally deploy a VM extension only if a parameter value is set to 'true'. How should you implement this conditional deployment?",
      "correct_answer": "Use the condition property with a boolean parameter expression",
      "wrong_answers": [
        "Use if() function within the resource definition",
        "Create separate Bicep modules for conditional resources",
        "Use variables to control resource deployment",
        "Implement logic in the parameter file"
      ],
      "explanation": "The condition property in Bicep allows you to conditionally deploy resources based on parameter values or expressions, providing clean conditional logic in infrastructure code.",
      "references": [
        "https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/conditional-resource-deployment",
        "https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/bicep-tutorial-conditional-deploy"
      ],
      "category": "Compute"
    }
  ]
}
